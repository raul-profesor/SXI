
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Pràctica 4.1 - Instal·lació i configuració de servidor web NGINX - Servicis en xarxa i Internet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-41-installacio-i-configuracio-de-servidor-web-nginx" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Servicis en xarxa i Internet" class="md-header__button md-logo" aria-label="Servicis en xarxa i Internet" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Servicis en xarxa i Internet
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pràctica 4.1 - Instal·lació i configuració de servidor web NGINX
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent=""  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent=""  aria-label="Cambiar a modo normal"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Cambiar a modo normal" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link md-tabs__link--active">
        Pràctiques SXI
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Servicis en xarxa i Internet" class="md-nav__button md-logo" aria-label="Servicis en xarxa i Internet" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Servicis en xarxa i Internet
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../..">Pràctiques SXI</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Pràctiques SXI" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Pràctiques SXI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P1/" class="md-nav__link">
        Pràctica 1 - Muntant l'arquitectura de xarxa
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P2.1/" class="md-nav__link">
        Pràctica 2.1 - Instal·lació i configuració de servidor DHCP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P2.2/" class="md-nav__link">
        Pràctica 2.2 - DHCP Relay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P3.1/" class="md-nav__link">
        Pràctica 3.1 - Configuració d'un servidor DNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P3.2/" class="md-nav__link">
        Pràctica 3.2 - Configuració de servidor DNS mestre/esclau i millora de la configuració
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P3.3/" class="md-nav__link">
        Pràctica 3.3 - Configuració de servidor DNS mestre i esclau en diferents xarxes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Pràctica 4.1 - Instal·lació i configuració de servidor web NGINX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Pràctica 4.1 - Instal·lació i configuració de servidor web NGINX
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requisits-abans-de-comencar-la-practica" class="md-nav__link">
    Requisits abans de començar la pràctica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installacio-servidor-web-nginx" class="md-nav__link">
    Instal·lació servidor web NGINX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacio-de-les-carpetes-del-lloc-web" class="md-nav__link">
    Creació de les carpetes del lloc web
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracio-de-servidor-web-nginx" class="md-nav__link">
    Configuració de servidor web NGINX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracio-del-dns" class="md-nav__link">
    Configuració del DNS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprovacions" class="md-nav__link">
    Comprovacions
  </a>
  
    <nav class="md-nav" aria-label="Comprovacions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comprovacio-de-funcionament-correcte" class="md-nav__link">
    Comprovació de funcionament correcte
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprovar-registres-del-servidor" class="md-nav__link">
    Comprovar registres del servidor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasca-a-realitzar" class="md-nav__link">
    Tasca a realitzar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions-finals" class="md-nav__link">
    Qüestions finals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avaluacio" class="md-nav__link">
    Avaluació
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P4.2/" class="md-nav__link">
        Pràctica 4.2 - Autenticació en Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P4.3/" class="md-nav__link">
        Pràctica 4.3 - Proxy invers amb Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P4.4/" class="md-nav__link">
        Pràctica 4.4 - Balanceig de càrrega amb proxy invers en Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P4.5/" class="md-nav__link">
        Practica 4.5 - Proxy invers i balanceig de càrrega amb SSL en NGINX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P5.1/" class="md-nav__link">
        Practica 5.1 - Instal·lació i hardening (bastionat) de servici SSH
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../P5.2/" class="md-nav__link">
        Practica 5.2 - SSH amb MFA (Autenticació Multifactor)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requisits-abans-de-comencar-la-practica" class="md-nav__link">
    Requisits abans de començar la pràctica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installacio-servidor-web-nginx" class="md-nav__link">
    Instal·lació servidor web NGINX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacio-de-les-carpetes-del-lloc-web" class="md-nav__link">
    Creació de les carpetes del lloc web
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracio-de-servidor-web-nginx" class="md-nav__link">
    Configuració de servidor web NGINX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracio-del-dns" class="md-nav__link">
    Configuració del DNS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprovacions" class="md-nav__link">
    Comprovacions
  </a>
  
    <nav class="md-nav" aria-label="Comprovacions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comprovacio-de-funcionament-correcte" class="md-nav__link">
    Comprovació de funcionament correcte
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprovar-registres-del-servidor" class="md-nav__link">
    Comprovar registres del servidor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasca-a-realitzar" class="md-nav__link">
    Tasca a realitzar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions-finals" class="md-nav__link">
    Qüestions finals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avaluacio" class="md-nav__link">
    Avaluació
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="practica-41-installacio-i-configuracio-de-servidor-web-nginx">Pràctica 4.1 – Instal·lació i configuració de servidor web NGINX</h1>
<h2 id="requisits-abans-de-comencar-la-practica">Requisits abans de començar la pràctica</h2>
<div class="admonition danger">
<p class="admonition-title">Atenció, molt important abans de començar!</p>
<ul>
<li>Heu de tenir funcionant sense errors el vostre servidor DNS. És a dir, almenys la pràctica 3.1 ha de funcionar sense problemes.</li>
<li><strong>Comproveu-ho abans de començar aquesta pràctica</strong></li>
</ul>
</div>
<h2 id="installacio-servidor-web-nginx">Instal·lació servidor web NGINX</h2>
<p>Per instal·lar el servidor nginx en el Ubuntu Server, primer actualitzem els repositoris i després instal·lem el paquet corresponent:</p>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt install nginx
</code></pre></div>
<p>Comprovem que nginx s'ha instal·lat i que està funcionant correctament:</p>
<div class="highlight"><pre><span></span><code>systemctl status nginx
</code></pre></div>
<h2 id="creacio-de-les-carpetes-del-lloc-web">Creació de les carpetes del lloc web</h2>
<p>Igual que ocorre en Apache, tots els arxius que formaran part d'un lloc web que servirà nginx s'organitzaran en carpetes. Aquestes carpetes, típicament estan dins de <code>/var/www</code>.</p>
<p>Així doncs, crearem la carpeta de nostre lloc web o domini:</p>
<p><div class="highlight"><pre><span></span><code>sudo mkdir -p /var/www/vostre_domini/html
</code></pre></div>
On el nom de domini serà el nom del jugador que tinga el mateix número que el vostre ordinador, de la següent plantilla:</p>
<p><a href="http://www.rayovallecano.es/equipo/plantilla/rayo">Com saber el meu nom de domini</a></p>
<div class="admonition note">
<p class="admonition-title">Exemple</p>
<p>Si el meu ordinador és el 12, el meu nom de domini serà <code>unai-lopez</code>, i si és el 4, el domini serà <code>msuarez</code> (sense punts).</p>
<p>Recordeu, no heu de posar punts ni espais en el nom de domini.</p>
</div>
<p>Ací, dins d'aquesta carpeta html, heu de descomprimir un dels zip amb tots els arxius per al lloc web d'exemple que us he proporcionat.</p>
<div class="admonition warning">
<p class="admonition-title">Nota</p>
<p><strong>NO</strong> és el mateix el vostre domini de zona de DNS, que el vostre domini per al vostre lloc web (bàsicament el nom que posem en la URL).</p>
</div>
<p>Per descomprimir, instal·leu-vos el paquet unzip:</p>
<p><div class="highlight"><pre><span></span><code>apt get install unzip
</code></pre></div>
I per descomprimir en un directori concret els arxius:</p>
<p><div class="highlight"><pre><span></span><code>unzip nom_arxiu.zip -d nom_directori
</code></pre></div>
A més, farem que el propietari d'aquesta carpeta i tot el que hi hagi dins sigui l'usuari <code>www-data</code>, típicament l'usuari del servici web.</p>
<p><div class="highlight"><pre><span></span><code>sudo chown -R www-data:www-data /var/www/vostre_domini/html
</code></pre></div>
I li donarem els permisos adequats perquè no ens de un error d'accés no autoritzat en entrar en el lloc web:</p>
<p><div class="highlight"><pre><span></span><code>sudo chmod -R <span class="m">755</span> /var/www/vostre_domini
</code></pre></div>
Per comprovar que el servidor està funcionant i servint pàgines correctament, podeu accedir des del vostre client a:</p>
<p><div class="highlight"><pre><span></span><code>http://ip_vostre_servidor
</code></pre></div>
I us haurà d'aparèixer alguna cosa així:</p>
<p><img alt="" src="../../img/4.1-1.png" /></p>
<p>El que demostra que tot és correcte fins ara.</p>
<h2 id="configuracio-de-servidor-web-nginx">Configuració de servidor web NGINX</h2>
<p>En Nginx hi ha dues rutes importants. La primera d'elles és <strong><code>sites-available</code></strong>, que conté els arxius de configuració dels hosts virtuals o blocs disponibles en el servidor. És a dir, cadascun dels llocs webs que alberga el servit. </p>
<p>L'altra és <strong><code>sites-enabled</code></strong>, que conté els arxius de configuració dels llocs habilitats, és a dir, els que funcionen en aquest moment.</p>
<p>Dins de <code>sites-available</code> hi ha un arxiu de configuració per defecte (default), que és la pàgina que es mostra si accedim al servidor sense indicar cap lloc web o quan el lloc web no és trobat en el servidor (a causa d'una mala configuració per exemple). Aquesta és la pàgina que ens ha aparegut en l'apartat anterior.</p>
<p>Per a que Nginx presente el contingut de la nostra web, és necessari crear un bloc de servidor amb les directives correctes. En comptes de modificar l'arxiu de configuració predeterminat directament, crearem un de nou en "/etc/nginx/sites-available/<strong>vostre_domini</strong>":</p>
<p><div class="highlight"><pre><span></span><code>sudo nano /etc/nginx/sites-available/vostre_domini
</code></pre></div>
I el contingut d'aquest arxiu de configuració:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">server {</span>
        <span class="l l-Scalar l-Scalar-Plain">listen 80;</span>
        <span class="l l-Scalar l-Scalar-Plain">listen [::]:80;</span>
        <span class="l l-Scalar l-Scalar-Plain">root /ruta/absoluta/arxiu/index;</span>
        <span class="l l-Scalar l-Scalar-Plain">index index.html index.htm index.nginx-debian.html;</span>
        <span class="l l-Scalar l-Scalar-Plain">server_name vostre_domini www.vostre_domini;</span>
        <span class="l l-Scalar l-Scalar-Plain">location / {</span>
                <span class="l l-Scalar l-Scalar-Plain">try_files $uri $uri/ =404;</span>
        <span class="l l-Scalar l-Scalar-Plain">}</span>
<span class="l l-Scalar l-Scalar-Plain">}</span>
</code></pre></div>
<p>Ací la directiva root ha d'anar seguida de la ruta absoluta absoluta on es trobi l'arxiu index.html de la nostra pàgina web, que es troba entre tots els que heu descomprimit. </p>
<p>Ací teniu un exemple de un lloc webs amb la seva ruta (directoris que hi ha) abans de l'arxiu index.html:</p>
<p><img alt="" src="../../img/4.1-2.png" /></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Ruta → /var/www/exemple2/html/2016_soft_landing</p>
</div>
<p>I crearem un arxiu simbòlic entre aquest arxiu i el de llocs que estan habilitats, perquè es doni d'alta automàticament.</p>
<div class="highlight"><pre><span></span><code>sudo ln -s /etc/nginx/sites-available/vostre_domain /etc/nginx/sites-enabled/
</code></pre></div>
<h2 id="configuracio-del-dns">Configuració del DNS</h2>
<p>Per a poder accedir a vostre lloc web, necessitareu afegir una entrada en l'arxiu de zona del vostre DNS.</p>
<p>Necessiteu afegir un parell de registres del tipus CNAME, de tal forma que els dominis o noms de la vostra pàgina web (<em>vostre_domini</em> i <em>www.vostre_domini</em>), en realitat apuntin a dnsserver.<em>vostre_nom</em>.es. (recordeu que en l'última pràctica del Tema 3 vau canviar el domini sre.es. Per vostre_nom.es.)</p>
<p>Per a configurar un CNAME podeu buscar informació de com fer-ho en algun d'aquests llocs:</p>
<p><a href="https://www.ionos.es/digitalguide/hosting/cuestiones-tecnicas/registro-cname/">Lloc 1</a></p>
<p><a href="https://www.nominalia.com/asistencia/que-es-como-se-configura-zona-dns-dominio/">Lloc 2</a></p>
<p><a href="https://www.marblestation.com/?p=543">Lloc 3</a></p>
<p>I reiniciem el servidor per aplicar la configuració:</p>
<div class="highlight"><pre><span></span><code>sudo systemctl restart nginx
</code></pre></div>
<h2 id="comprovacions">Comprovacions</h2>
<h3 id="comprovacio-de-funcionament-correcte">Comprovació de funcionament correcte</h3>
<p>Si tot ha anat bé, heu de poder accedir a vostre lloc web escrivint en la caixa de la URL del navegador:</p>
<div class="highlight"><pre><span></span><code>http://vostre_domini

http://www.vostre_domini
</code></pre></div>
<h3 id="comprovar-registres-del-servidor">Comprovar registres del servidor</h3>
<p>Comproveu que les peticions s'estan registrant correctament en els arxius de logs, tant les correctes com les errònies:</p>
<ul>
<li><code>/var/log/nginx/access.log</code>: cada sol·licitud al seu servidor web es registra en aquest arxiu de registre, de no ser que Nginx estiga configurat per fer alguna cosa diferent. </li>
<li><code>/var/log/nginx/error.log</code>: qualsevol error de Nginx s'assentarà en aquest registre. </li>
</ul>
<h2 id="tasca-a-realitzar">Tasca a realitzar</h2>
<p>Si volem tenir diversos dominis o llocs web en el mateix servidor nginx (és a dir, que tindran la mateixa IP) hem de repetir tot el procés anterior amb el nou nom de domini.</p>
<p>Configura un nou domini per a l'exemple de lloc web de l'altre .zip i documenta el procés.</p>
<p>El nou nom de domini serà el cognom del jugador que tinga el dorsal amb el mateix número que el vostre número d'ordinador, de la següent plantilla:</p>
<p><a href="https://www.transfermarkt.es/fc-st-pauli/kader/verein/35">St. Pauli</a></p>
<h2 id="questions-finals">Qüestions finals</h2>
<div class="admonition task">
<p class="admonition-title">Questió 1</p>
<p>De quina altra forma alternativa podría resoldre el nom del meu domini web amb el servici DNS sense fer ús del register CNAME?</p>
</div>
<div class="admonition task">
<p class="admonition-title">Questió 2</p>
<p>Què passa si no faig el link simbòlic entre <code>sites-available</code> i <code>sites-enabled</code> del meu lloc web?</p>
</div>
<div class="admonition task">
<p class="admonition-title">Questió 3</p>
<p>Qué passa si no li done els permisos adeqüats a <code>/var/www/vostre_domini</code>? </p>
</div>
<div class="admonition task">
<p class="admonition-title">Questió 4</p>
<p>Podeu accedir desde la LAN (el vostre Lliurex) a la vostra web? Tant si es afirmatiu com negatiu, explica el motiu.</p>
</div>
<div class="admonition task">
<p class="admonition-title">Questió 5</p>
<p>Si no ficarem cap entrada DNS a l'arxiu de zona, podrieu accedir encara a les vostres webs? Tant si es afirmatiu com negatiu, explica el motiu.</p>
</div>
<h2 id="avaluacio">Avaluació</h2>
<table>
<thead>
<tr>
<th align="left">Criteri</th>
<th align="center">Puntuació</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Configuració correcta del servidor web</td>
<td align="center"><strong>1 punts</strong></td>
</tr>
<tr>
<td align="left">Configuració correcta del DNS</td>
<td align="center"><strong>2 punts</strong></td>
</tr>
<tr>
<td align="left">Comprovació del correcte funcionament</td>
<td align="center"><strong>1 punts</strong></td>
</tr>
<tr>
<td align="left">Configuració correcta i comprovació del funcionament de una segona web</td>
<td align="center"><strong>2 punts</strong></td>
</tr>
<tr>
<td align="left">Qüestions finals</td>
<td align="center"><strong>3 punts</strong></td>
</tr>
<tr>
<td align="left">S'ha tingut cura amb el format del document, utilitzant la plantilla actualitzada i fent ús d'un correcte llenguatge tècnic</td>
<td align="center"><strong>0,5 punt</strong></td>
</tr>
<tr>
<td align="left">S'ha inclòs la taula amb les IPs de cada màquina de la pràctica, tal i com es demana</td>
<td align="center"><strong>0,5 punt</strong></td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../P3.3/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Pràctica 3.3 - Configuració de servidor DNS mestre i esclau en diferents xarxes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Pràctica 3.3 - Configuració de servidor DNS mestre i esclau en diferents xarxes
            </div>
          </div>
        </a>
      
      
        
        <a href="../P4.2/" class="md-footer__link md-footer__link--next" aria-label="Següent: Pràctica 4.2 - Autenticació en Nginx" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Següent
              </span>
              Pràctica 4.2 - Autenticació en Nginx
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.expand", "navigation.top", "navigation.indexes"], "translations": {"clipboard.copy": "C\u00f2pia al porta-retalls", "clipboard.copied": "Copiat al porta-retalls", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Cerca", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>